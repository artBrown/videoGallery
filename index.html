<html>
<head>
  <title>videoGallery</title>
  <link rel="stylesheet" type="text/css" href="css/videoGallery.css"/>
  <link rel="stylesheet" type="text/css" href="css/font-awesome.css"/>
<body>
<section class="gallery">
  <article class="video">
    <video id="d1" data-background-color="LavenderBlush">
      <source src="mov/d1.mp4" type="video/mp4">
    </video>
    <div class="controls">
      <div class="buttons">
        <button type="button" class="start"><i class="fa fa-play"></i></button>
        <button type="button" class="stop" disabled><i class="fa fa-stop"></i></button>
        <button type="button" class="pause" disabled><i class="fa fa-pause"></i></button>
        <button type="button" class="plus" title="Volum" disabled><i class="fa fa-volume-up"></i></button>
        <button type="button" class="minus" title="Volum" disabled><i class="fa fa-volume-down"></i></button>
        <button type="button" class="mute" disabled><i class="fa fa-volume-off"></i></button>
      </div>
      <div class="bar">
        <div class="progress"></div>
      </div>
      <div class="mark"></div>
    </div>
  </article>
  <article class="video">
    <video id="d2" data-background-color="Lavender">
      <source src="mov/d2.mp4" type="video/mp4">
    </video>
    <div class="controls">
      <div class="buttons">
        <button type="button" class="start"><i class="fa fa-play"></i></button>
        <button type="button" class="stop" disabled><i class="fa fa-stop"></i></button>
        <button type="button" class="pause" disabled><i class="fa fa-pause"></i></button>
        <button type="button" class="plus" title="Volum" disabled><i class="fa fa-volume-up"></i></button>
        <button type="button" class="minus" title="Volum" disabled><i class="fa fa-volume-down"></i></button>
        <button type="button" class="mute" disabled><i class="fa fa-volume-off"></i></button>
      </div>
      <div class="bar">
        <div class="progress"></div>
      </div>
      <div class="mark"></div>
    </div>
  </article>
  <article class="video">
    <video id="d3" data-background-color="OrangeRed">
      <source src="mov/d3.mp4" type="video/mp4">
    </video>
    <div class="controls">
      <div class="buttons">
        <button type="button" class="start"><i class="fa fa-play"></i></button>
        <button type="button" class="stop" disabled><i class="fa fa-stop"></i></button>
        <button type="button" class="pause" disabled><i class="fa fa-pause"></i></button>
        <button type="button" class="plus" title="Volum" disabled><i class="fa fa-volume-up"></i></button>
        <button type="button" class="minus" title="Volum" disabled><i class="fa fa-volume-down"></i></button>
        <button type="button" class="mute" disabled><i class="fa fa-volume-off"></i></button>
      </div>
      <div class="bar">
        <div class="progress"></div>
      </div>
      <div class="mark"></div>
    </div>
  </article>
  <article class="video">
    <video id="s1" data-background-color="Gold">
      <source src="mov/s1.mp4" type="video/mp4">
    </video>
    <div class="controls">
      <div class="buttons">
        <button type="button" class="start"><i class="fa fa-play"></i></button>
        <button type="button" class="stop" disabled><i class="fa fa-stop"></i></button>
        <button type="button" class="pause" disabled><i class="fa fa-pause"></i></button>
        <button type="button" class="plus" title="Volum" disabled><i class="fa fa-volume-up"></i></button>
        <button type="button" class="minus" title="Volum" disabled><i class="fa fa-volume-down"></i></button>
        <button type="button" class="mute" disabled><i class="fa fa-volume-off"></i></button>
      </div>
      <div class="bar">
        <div class="progress"></div>
      </div>
      <div class="mark"></div>
    </div>
  </article>
  <article class="video">
    <video id="s2" data-background-color="Cornsilk">
      <source src="mov/s2.mp4" type="video/mp4">
    </video>
    <div class="controls">
      <div class="buttons">
        <button type="button" class="start"><i class="fa fa-play"></i></button>
        <button type="button" class="stop" disabled><i class="fa fa-stop"></i></button>
        <button type="button" class="pause" disabled><i class="fa fa-pause"></i></button>
        <button type="button" class="plus" title="Volum" disabled><i class="fa fa-volume-up"></i></button>
        <button type="button" class="minus" title="Volum" disabled><i class="fa fa-volume-down"></i></button>
        <button type="button" class="mute" disabled><i class="fa fa-volume-off"></i></button>
      </div>
      <div class="bar">
        <div class="progress"></div>
      </div>
      <div class="mark"></div>
    </div>
  </article>
  <article class="video">
    <video id="s3" data-background-color="DarkOliveGreen">
      <source src="mov/s3.mp4" type="video/mp4">
    </video>
    <div class="controls">
      <div class="buttons">
        <button type="button" class="start"><i class="fa fa-play"></i></button>
        <button type="button" class="stop" disabled><i class="fa fa-stop"></i></button>
        <button type="button" class="pause" disabled><i class="fa fa-pause"></i></button>
        <button type="button" class="plus" title="Volum" disabled><i class="fa fa-volume-up"></i></button>
        <button type="button" class="minus" title="Volum" disabled><i class="fa fa-volume-down"></i></button>
        <button type="button" class="mute" disabled><i class="fa fa-volume-off"></i></button>
      </div>
      <div class="bar">
        <div class="progress"></div>
      </div>
      <div class="mark"></div>
    </div>
  </article>
  <article class="video">
    <video id="s4" data-background-color="MediumAquamarine">
      <source src="mov/s4.mp4" type="video/mp4">
    </video>
    <div class="controls">
      <div class="buttons">
        <button type="button" class="start"><i class="fa fa-play"></i></button>
        <button type="button" class="stop" disabled><i class="fa fa-stop"></i></button>
        <button type="button" class="pause" disabled><i class="fa fa-pause"></i></button>
        <button type="button" class="plus" title="Volum" disabled><i class="fa fa-volume-up"></i></button>
        <button type="button" class="minus" title="Volum" disabled><i class="fa fa-volume-down"></i></button>
        <button type="button" class="mute" disabled><i class="fa fa-volume-off"></i></button>
      </div>
      <div class="bar">
        <div class="progress"></div>
      </div>
      <div class="mark"></div>
    </div>
  </article>
  <article class="video">
    <video id="s5" data-background-color="LightSteelBlue">
      <source src="mov/s5.mp4" type="video/mp4">
    </video>
    <div class="controls">
      <div class="buttons">
        <button type="button" class="start"><i class="fa fa-play"></i></button>
        <button type="button" class="stop" disabled><i class="fa fa-stop"></i></button>
        <button type="button" class="pause" disabled><i class="fa fa-pause"></i></button>
        <button type="button" class="plus" title="Volum" disabled><i class="fa fa-volume-up"></i></button>
        <button type="button" class="minus" title="Volum" disabled><i class="fa fa-volume-down"></i></button>
        <button type="button" class="mute" disabled><i class="fa fa-volume-off"></i></button>
      </div>
      <div class="bar">
        <div class="progress"></div>
      </div>
      <div class="mark"></div>
    </div>
  </article>
</section>
<script src="js/jquery.js"></script>
<script src="js/jquery.awesome-cursor.min.js"></script>
<script>
  $(function ($, d) {
    var articles = {};
    $(".video").each(function (i, article) {
      var cont = $(article).find("video")[0],
        start = $(article).find(".start")[0],
        pause = $(article).find(".pause")[0],
        stop = $(article).find(".stop")[0],
        plus = $(article).find(".plus")[0],
        minus = $(article).find(".minus")[0],
        mute = $(article).find(".mute")[0],
        progress = $(article).find(".progress")[0],
        barWidth = $(article).find(".bar")[0].offsetWidth,
        contPlay = 0,
        rgb = cont.getAttribute('data-background-color'), _rgb = {}, rgba = ['r', 'g', 'b'];
      var startPlayback = function () {
        cont.play();
      };
      var pausePlayback = function () {
        cont.pause();
      };
      var stopPlayback = function () {
        cont.pause();
        cont.currentTime = 0;
        endPlayback();
      };
      var volumeUp = function () {
        var volume = Math.floor(cont.volume * 10) / 10;
        cont.muted = false;
        if (volume >= 0.9) cont.volume = 1; else cont.volume += 0.1;
      };
      var volumeDown = function () {
        var volume = Math.floor(cont.volume * 10) / 10;
        cont.muted = false;
        if (volume <= 0.1) cont.volume = 0; else cont.volume -= 0.1;
      };
      var toggleMute = function () {
        if (cont.muted) {
          cont.muted = false;
        } else {
          cont.muted = true;
        }
      };
      var endPlayback = function () {
        start.disabled = false;
        pause.disabled = true;
        stop.disabled = true;
      };
      var reportProgress = function () {
        var time = Math.round(this.currentTime);
        var duration = parseInt(this.duration);
        var position = barWidth * time / duration;
        if (isNaN(position)) return;
        progress.style.width = position + "px";
//        console.log("p:" + position);
      };
      var toggleContPlay = function () {
        rgb = cont.style.backgroundColor;
        if (contPlay ^= 1) {
          cont.removeEventListener("mouseover", startPlayback);
          cont.removeEventListener("mouseleave", pausePlayback);
          if (typeof rgb === "string") {
            if (/(rgb|RGB)\(\d{1,3}\s*?,\s*?\d{1,3}\s*?,\s*?\d{1,3}\)/.test(rgb))
              rgb = rgbO2S(compRgb(rgbS2O(rgb, _rgb)), rgb);
          } else
            rgb = "rgb(0,0,0)";
          $(cont).awesomeCursor('yahoo', {
            color:   rgb,
            hotspot: 'top right'
          });
        } else {
          cont.addEventListener("mouseover", startPlayback, false);
          cont.addEventListener("mouseleave", pausePlayback, false);
          rgb = compRgb(rgb);
          $(cont).css('cursor', '');
        }
        function rgbS2O(s, o) {
          s.replace(/[^\d,]/g, '').split(',').forEach(function (e, i) {
            o[rgba[i]] = Number(e);
          });
          return o;
        }

        function rgbO2S(o, s) {
          return s = "rgb(" + o.r + "," + o.g + "," + o.b + ")";
        }
      };
      if (cont.canPlayType) {
        cont.addEventListener("timeupdate", reportProgress, false);
        cont.addEventListener("ended", endPlayback, false);
        cont.addEventListener("play", function () {
          start.disabled = true;
          pause.disabled = false;
          stop.disabled = false;
          plus.disabled = false;
          minus.disabled = false;
          mute.disabled = false;
        }, false);
        cont.addEventListener("pause", function () {
          start.disabled = false;
          pause.disabled = true;
          plus.disabled = true;
          minus.disabled = true;
          mute.disabled = true;
        }, false);
        start.addEventListener("click", startPlayback, false);
        stop.addEventListener("click", stopPlayback, false);
        pause.addEventListener("click", pausePlayback, false);
        plus.addEventListener("click", volumeUp, false);
        minus.addEventListener("click", volumeDown, false);
        mute.addEventListener("click", toggleMute, false);
        cont.addEventListener("mouseover", startPlayback, false);
        cont.addEventListener("mouseleave", pausePlayback, false);
        cont.addEventListener("click", toggleContPlay, false);
        cont.style.backgroundColor = rgb;
      }
      articles[$(article).find("video")[0].id] = this;
    });
    // complement
    function compRgb(rgb) {
      var hsv = RGB2HSV(rgb);
      hsv.hue = HueShift(hsv.hue, 180.0);
      return HSV2RGB(hsv);
    }

    // RGB2HSV and HSV2RGB are based on Color Match Remix [http://color.twysted.net/]
    // which is based on or copied from ColorMatch 5K [http://colormatch.dk/]
    function RGB2HSV(rgb) {
      var hsv = new Object();
      var max = max3(rgb.r, rgb.g, rgb.b);
      var dif = max - min3(rgb.r, rgb.g, rgb.b);
      hsv.saturation = (max == 0.0) ? 0 : (100 * dif / max);
      if (hsv.saturation == 0) hsv.hue = 0;
      else if (rgb.r == max) hsv.hue = 60.0 * (rgb.g - rgb.b) / dif;
      else if (rgb.g == max) hsv.hue = 120.0 + 60.0 * (rgb.b - rgb.r) / dif;
      else if (rgb.b == max) hsv.hue = 240.0 + 60.0 * (rgb.r - rgb.g) / dif;
      if (hsv.hue < 0.0) hsv.hue += 360.0;
      hsv.value = Math.round(max * 100 / 255);
      hsv.hue = Math.round(hsv.hue);
      hsv.saturation = Math.round(hsv.saturation);
      return hsv;
    }

    function HSV2RGB(hsv) {
      var rgb = new Object();
      if (hsv.saturation == 0) {
        rgb.r = rgb.g = rgb.b = Math.round(hsv.value * 2.55);
      } else {
        hsv.hue /= 60;
        hsv.saturation /= 100;
        hsv.value /= 100;
        i = Math.floor(hsv.hue);
        f = hsv.hue - i;
        p = hsv.value * (1 - hsv.saturation);
        q = hsv.value * (1 - hsv.saturation * f);
        t = hsv.value * (1 - hsv.saturation * (1 - f));
        switch (i) {
        case 0:
          rgb.r = hsv.value;
          rgb.g = t;
          rgb.b = p;
          break;
        case 1:
          rgb.r = q;
          rgb.g = hsv.value;
          rgb.b = p;
          break;
        case 2:
          rgb.r = p;
          rgb.g = hsv.value;
          rgb.b = t;
          break;
        case 3:
          rgb.r = p;
          rgb.g = q;
          rgb.b = hsv.value;
          break;
        case 4:
          rgb.r = t;
          rgb.g = p;
          rgb.b = hsv.value;
          break;
        default:
          rgb.r = hsv.value;
          rgb.g = p;
          rgb.b = q;
        }
        rgb.r = Math.round(rgb.r * 255);
        rgb.g = Math.round(rgb.g * 255);
        rgb.b = Math.round(rgb.b * 255);
      }
      return rgb;
    }

    //Adding HueShift via Jacob (see comments)
    function HueShift(h, s) {
      h += s;
      while (h >= 360.0) h -= 360.0;
      while (h < 0.0) h += 360.0;
      return h;
    }

    //min max via Hairgami_Master (see comments)
    function min3(a, b, c) {
      return (a < b) ? ((a < c) ? a : c) : ((b < c) ? b : c);
    }

    function max3(a, b, c) {
      return (a > b) ? ((a > c) ? a : c) : ((b > c) ? b : c);
    }
  }(jQuery, document));
</script>
</body>
</html>
